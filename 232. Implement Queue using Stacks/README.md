https://leetcode.com/problems/implement-queue-using-stacks/

https://walkccc.me/LeetCode/problems/0232/

____________

[Разбор задачи 232 leetcode.com Implement Queue using Stacks. Решение на C++](https://www.youtube.com/watch?v=Vzpz4xjm6xE)

1. Наивный алгоритм.

Всё содержимое очереди держим в одном стеке. 

[1,2,3]top

Когда нужно добавить - добавляем в стек

Когда нужно извлечь - переносим все элементы, кроме последнего, во временный стек, извлекаем последний элемент, возвращаем все элементы обратно.

Добавление O(1) в среднем.

рор/peek - O(size), где size - текущий размер стека.

2. Улучшенный алгоритм.

Удобно извлекать, когда самый первый занесённый элемент - на вершине стека.

Удобно добавлять, когда добавляемый элемент заносится на вершину стека.

Противоречие уйдёт, если сделать два стека: в одном на вершине наиболее давно добавленный элемент. в другом на вершине последний добавленный.

in[]top out[]top

push(1)

in[1]top out[]top

push(2)

in[1,2]top out[]top

push(3)

in[1,2,3]top out[]top 

рор()

in[]top out[3,2,1]top 

in[]top out[3,2]top

push(4)

in[4]top out[3,2]top 

push(5)

in[4,5]top out[3,2]top 

рор()

in[4,5]top out[3]top

Пока исходящий стек не пуст - сложность оперции рор для очереди такая же, как для стека.

Как только исходящий стек опустеет - одна операция рор потребует столько действий, сколько накопилось элементов во входящем стеке.

0(1) в среднем (amortized)

Каждый элемент, проходящий через очередь, O(1) в среднем добавляется во входящий стек, за O(1) убирается из исходящего, за O(1) перекидывается из одного стека в другой.

Исходим из того, что push и pop у stack, которые мы используем, в среднем O(1), то есть N элементов через стек можно провести за O(N). 
Теперь посмотрим, за сколько операций N элементов можно провести через нашу очередь. 
Каждый элемент будет приводить к двум push (в каждом из стеков) и к двум pop. N штук каждой из этих операций O(N). 
Итого N элементов пройдут через нашу очередь за O(N). Это и есть в среднем O(1). При этом может быть ситуация, что один push или один pop получится O(N). 
____________
