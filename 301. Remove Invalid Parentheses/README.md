https://leetcode.com/problems/remove-invalid-parentheses/description/

https://walkccc.me/LeetCode/problems/301/

___

* При проходе слева-направа должен выполняться инвариант: closedParen <= openParen
* При проходе справа-налево должен выполняться инвариант: openParen <= closedParen
* Если оба этих условиях выполняется, то openParen = closedParen -- что и характерно для ПСП

___

    будем анализировать шаг за шагом и показывать, как стек вызовов выглядит в каждом этапе для строки "()())()".
    
    Исходная строка: "()())()"
    Первый вызов removeHelper("()())()", 0, 0, '(', ')')
    
    Позиция Right = 0: ( → numOpenParen = 1, numClosedParen = 0
    
    Позиция Right = 1: ) → numOpenParen = 1, numClosedParen = 1
    
    Позиция Right = 2: ( → numOpenParen = 2, numClosedParen = 1
    
    Позиция Right = 3: ) → numOpenParen = 2, numClosedParen = 2
    
    Позиция Right = 4: ) → numOpenParen = 2, numClosedParen = 3
    
    numClosedParen - 1 == numOpenParen выполняется (3 - 1 == 2)
    
    Удаление лишней скобки:
    
    Left = 0: не является закрывающей скобкой
    Left = 1: является закрывающей скобкой
    Рекурсивный вызов 1 removeHelper("(())()", 4, 1, '(', ')')
    
    Позиция Right = 4: продолжаем проверку новой строки
    Состояние стека:
    scss
    Копировать код
    removeHelper("()())()", 0, 0, '(', ')')
        -> removeHelper("(())()", 4, 1, '(', ')')
    Рекурсивный вызов 1 removeHelper("(())()", 4, 1, '(', ')')
    
    Позиция Right = 4: ) → numOpenParen = 2, numClosedParen = 3
    numClosedParen - 1 == numOpenParen выполняется (3 - 1 == 2)
    Удаление лишней скобки:
    
    Left = 1: не является закрывающей скобкой
    Left = 2: не является закрывающей скобкой
    Left = 3: не является закрывающей скобкой
    Left = 4: является закрывающей скобкой
    Рекурсивный вызов 2 removeHelper("()()()", 4, 4, '(', ')')
    
    Состояние стека:
    scss
    Копировать код
    removeHelper("()())()", 0, 0, '(', ')')
        -> removeHelper("(())()", 4, 1, '(', ')')
            -> removeHelper("()()()", 4, 4, '(', ')')
    Рекурсивный вызов 2 removeHelper("()()()", 4, 4, '(', ')')
    
    Позиция Right = 4: ) → numOpenParen = 2, numClosedParen = 2
    
    Позиция Right = 5: ) → numOpenParen = 2, numClosedParen = 3
    
    numClosedParen - 1 == numOpenParen выполняется (3 - 1 == 2)
    
    Удаление лишней скобки:
    
    Left = 4: является закрывающей скобкой
    Рекурсивный вызов 3 removeHelper("()())", 4, 4, '(', ')')
    
    Состояние стека:
    scss
    Копировать код
    removeHelper("()())()", 0, 0, '(', ')')
        -> removeHelper("(())()", 4, 1, '(', ')')
            -> removeHelper("()()()", 4, 4, '(', ')')
                -> removeHelper("()())", 4, 4, '(', ')')
    Рекурсивный вызов 3 removeHelper("()())", 4, 4, '(', ')')
    
    Позиция Right = 4: ) → numOpenParen = 2, numClosedParen = 3
    
    numClosedParen - 1 == numOpenParen выполняется (3 - 1 == 2)
    
    Удаление лишней скобки:
    
    Left = 4: является закрывающей скобкой
    Рекурсивный вызов 4 removeHelper("()()", 4, 4, '(', ')')
    
    Состояние стека:
    scss
    Копировать код
    removeHelper("()())()", 0, 0, '(', ')')
        -> removeHelper("(())()", 4, 1, '(', ')')
            -> removeHelper("()()()", 4, 4, '(', ')')
                -> removeHelper("()())", 4, 4, '(', ')')
                    -> removeHelper("()()", 4, 4, '(', ')')
    Рекурсивный вызов 4 removeHelper("()()", 4, 4, '(', ')')
    
    Позиция Right = 4: ) → numOpenParen = 2, numClosedParen = 2
    
    Позиция Right = 5: ) → numOpenParen = 2, numClosedParen = 3
    
    numClosedParen - 1 == numOpenParen выполняется (3 - 1 == 2)
    
    Удаление лишней скобки:
    
    Left = 4: является закрывающей скобкой
    Рекурсивный вызов 5 removeHelper("()(", 4, 4, '(', ')')
    
    Состояние стека:
    scss
    Копировать код
    removeHelper("()())()", 0, 0, '(', ')')
        -> removeHelper("(())()", 4, 1, '(', ')')
            -> removeHelper("()()()", 4, 4, '(', ')')
                -> removeHelper("()())", 4, 4, '(', ')')
                    -> removeHelper("()()", 4, 4, '(', ')')
                        -> removeHelper("()(", 4, 4, '(', ')')
    Переворот строки
    После завершения всех возможных удалений скобок, рекурсивные вызовы возвращаются к предыдущим уровням. Когда достигаем финального вызова с корректной строкой, происходит переворот строки для проверки лишних открывающих скобок.
    Финальные вызовы для проверки перевернутой строки:
    Рекурсивный вызов 6 removeHelper(")())(", 0, 0, ')', '(')
    Рекурсивный вызов 7 removeHelper(")(()(", 0, 0, ')', '(')
    Рекурсивный вызов 8 removeHelper(")(()(", 4, 1, ')', '(')
    Рекурсивный вызов 9 removeHelper("((()(", 4, 4, ')', '(')
    Рекурсивный вызов 10 removeHelper("()(", 4, 4, ')', '(')
    Рекурсивный вызов 11 removeHelper("(((", 4, 4, ')', '(')
    В результате всех этих вызовов строки "(())()" и "()()()" будут добавлены в buffer.
    
    Состояние стека после всех вызовов:
    scss
    Копировать код
    removeHelper("()())()", 0, 0, '(', ')')
        -> removeHelper("(())()", 4, 1, '(', ')')
            -> removeHelper("()()()", 4, 4, '(', ')')
                -> removeHelper("()())", 4, 4, '(', ')')
                    -> removeHelper("()()", 4, 4, '(', ')')
                        -> removeHelper("()(", 4, 4, '(', ')')
                            -> removeHelper(")())(", 0, 0, ')', '(')
                                -> removeHelper(")(()(", 0, 0, ')', '(')
                                    -> removeHelper("((()(", 4, 4, ')', '(')
                                        -> removeHelper("()(", 4, 4, ')', '(')
                                            -> removeHelper("(((", 4, 4, ')', '(')
    Эти шаги демонстрируют, как стек вызовов растет и сокращается, когда removeHelper обрабатывает строку и рекурсивно удаляет лишние скобки, пока не достигнет корректных результатов.
