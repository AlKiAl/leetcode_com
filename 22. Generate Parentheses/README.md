https://leetcode.com/problems/generate-parentheses/description/

https://walkccc.me/LeetCode/problems/0022/ -- аналог 22a.cpp

https://github.com/doocs/leetcode/blob/main/solution/0000-0099/0022.Generate%20Parentheses/README_EN.md

https://www.geeksforgeeks.org/print-all-combinations-of-balanced-parentheses/

Инвариант свойственный ПСП: 

Положим, в ПСП N открывающих скобок, тогда выполнятеся инвариант: 
* open не превосходит N
* close не превосходит open


___________

[Разбор задачи 22 leetcode.com Generate Parentheses. Решение на C++](https://www.youtube.com/watch?v=C5YfXfGH3pc&ab_channel=3.5%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B8%D0%B2%D0%BD%D0%B5%D0%B4%D0%B5%D0%BB%D1%8E)

22a.cpp  
22b.cpp  
22d.cpp  

$n$ Число Каталана - Количество правильных скобочных последовательностей длины 2n, то есть таких последовательностей из n левых и n правых скобок, в которых количество открывающих скобок равно количеству закрывающих, и в любом её префиксе открывающих скобок не меньше, чем закрывающих.

0. Как не надо 1: перебрать 2^(2n) вариантов, на каждое из 2n  мест поставить открывающую или закрывающую скобку.
для каждого варианта проверить, правильная ли это скобочная последовательность.

<!---
1  2  3   4   5    6  n

1  2  5  14  42   132  n-е число Каталана

4  16  64  256  1024  4096   2^(2n)

4  8  12  18  24   31   во сколько раз неоптимально
-->

| 1 	|  2 	|  3 	| 4   	| 5    	| 6    	| n                           	|
|:-:	|:--:	|:--:	|-----	|------	|------	|-----------------------------	|
| 1 	|  2 	|  5 	| 14  	| 42   	| 132  	| n-е число Каталана          	|
| 4 	| 16 	| 64 	| 256 	| 1024 	| 4096 	| 2^(2n)                      	|
| 4 	| 8  	| 12 	| 18  	| 24   	| 31   	| во сколько раз неоптимально 	|

1. Как не надо 2: перебрать все перестановки n открывающих скобок и n закрывающих. Для С++ - next_permutation.

Перестановок - С(2n,n)

<!---
1   2  3   4   5    6   n

1   2  5  14  42  132   n-е число Каталана

2   б  20  70  252   924   С(2n,n)

2   3  4   5   б    7   во сколько раз неоптимально

1   2  б  20  70  252    С(2n-2,n-1)

1   1  1.2  1.4  1.6  1.9   во сколько раз неоптимально
-->

| 1 	| 2 	|  3  	| 4   	| 5   	| 6   	| n                           	|
|:-:	|:-:	|:---:	|-----	|-----	|-----	|-----------------------------	|
| 1 	| 2 	|  5  	| 14  	| 42  	| 132 	| n-е число Каталана          	|
| 2 	| б 	|  20 	| 70  	| 252 	| 924 	| С(2n,n)                     	|
| 2 	| 3 	| 4   	| 5   	| б   	| 7   	| во сколько раз неоптимально 	|
| 1 	| 2 	| б   	| 20  	| 70  	| 252 	| С(2n-2,n-1)                 	|
| 1 	| 1 	| 1.2 	| 1.4 	| 1.6 	| 1.9 	| во сколько раз неоптимально 	|



2. Рекурсивный перебор-построение. Не перебираем варианты, которые к ответу не приводят.

Какой префикс гложет быть префиксом правильной скобочной последовательности:  
а) когда в любом его префиксе количество открывающих скобок >= количества закрывающих скобок.  
б) количество открывающих скобок не должно быть больше 'n'

сгеиерировали префикс - для него нужно знать количество открывающих и закрывающих.

Если открывающих < п - можно дописать к префиксу открывающую.  
Если открывающих в префиксе > чем закрывающих - можно дописать закрывающую.

(открывающих в префиксе, закрывающих в префиксе, n) -> (сколько осталось открыть, сколько осталось закрыть открытых)

Сложность по времени и памяти O(C(n)*n), где C(n) - n число Каталана

З. Нерекурсивная реализация. Идеальный алгоритм - где число 
действий — размера ответа.

Научиться переходить от одной правильной скобочной 
последовательности к лексикографически следющей ПСП.

( 0

) 1

'(' < ')'

((())) - n открывающих, затем n закрывающих - самая маленькая 
ПСП. Генерируем вручную, дальше переходим к следующей в цикле.

а) Нужно изменить как можно меньше последних символов.

6) Нужно первый символ изменяемого участка сделать больше,
7) а остальные поставить так, чтобы последовательность была правильная - и минимальная при размещении этого набора символов на этих местах.

<!---
( ( ( ) ) )

0 0 0 1 1 1

    ^
-->

| ( 	| ( 	| ( 	| ) 	| ) 	| ) 	|
|:-:	|:-:	|---	|---	|---	|---	|
| 0 	| 0 	| 0 	| 1 	| 1 	| 1 	|
|   	|   	| ^ 	|   	|   	|   	|

Идём от предпоследней позиции.
Остановиться можем только на 0 - открывающей скобке '('
В пройденных символах должна быть 1 - хотя бы одна закрывающая скобка.


На позиции первого 0 изменяемого суффикса - ставим 1
Когда НЕ можем поставить? 
Не можем поставить закрывающую, если в префиксе открывающих н закрывающих одинаковое количество - нужно отслеживать количество открывающих и закрывающих в пройденном суффиксе. 
Если число открывающих == числу закрывающих - не гложем такой суффикс начать с закрывающей - нужно увеличивать суффикс.

В суффиксе должно быть строго больше закрывающих. 
Суффикс должен начинаться на открывающую.
Тогда: можем поставить первой закрывающую.
Далее минимальный лексикографически суффикс: сначала все открывающие, потом все закрывающие.

<!---
((()))   
  ^	1 откр, 3 закр
-->

| ( 	| ( 	| ( 	| ) 	| ) 	| ) 	|                	|
|:-:	|:-:	|---	|---	|---	|---	|----------------	|
| 0 	| 0 	| 0 	| 1 	| 1 	| 1 	|                	|
|   	|   	| ^ 	|   	|   	|   	| 1 откр, 3 закр 	|

<!---
(  (  )  (  )  )   
         ^	    1 откр, 2 закр
-->

| ( 	| ( 	| ) 	| ( 	| ) 	| ) 	|                	|
|:-:	|:-:	|---	|---	|---	|---	|----------------	|
|   	|   	|   	| ^ 	|   	|   	| 1 откр, 2 закр 	|

<!---
(())()
 ^      2 откр, 3 закр
-->

| ( 	| ( 	| ) 	| ) 	| ( 	| ) 	|                	|
|:-:	|:-:	|---	|---	|---	|---	|----------------	|
|   	| ^ 	|   	|   	|   	|   	| 2 откр, 3 закр 	|

<!---
(  )  (  (  )  )   
         ^	    1 откр, 2 закр
-->

| ( 	| ) 	| ( 	| ( 	| ) 	| ) 	|                	|
|:-:	|:-:	|---	|---	|---	|---	|----------------	|
|   	|   	|   	| ^ 	|   	|   	| 1 откр, 2 закр 	|

<!---
()()()
-->

| ( 	| ) 	| ( 	| ) 	| ( 	| ) 	|
|:-:	|:-:	|---	|---	|---	|---	|
______________________________________

Дмитрий Козырев 
​Можно еще поставить assert на значение n чтобы знать насколько большое n они дали

Дмитрий Козырев 
​С assert(n <= 8); получает Accepted, с семеркой - уже нет, не серьезно

